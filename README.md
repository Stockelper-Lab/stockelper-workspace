# ğŸ“ˆ Stockelper Workspace

**AI ê¸°ë°˜ í•œêµ­ ì£¼ì‹ íˆ¬ì í”Œë«í¼ì˜ ì¤‘ì•™ ì›Œí¬ìŠ¤í˜ì´ìŠ¤**

StockelperëŠ” LangGraph ë‹¤ì¤‘ ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œ, Neo4j ì§€ì‹ ê·¸ë˜í”„, Black-Litterman í¬íŠ¸í´ë¦¬ì˜¤ ìµœì í™”ë¥¼ í™œìš©í•˜ì—¬ íˆ¬ììì—ê²Œ ë§ì¶¤í˜• íˆ¬ì ì „ëµê³¼ ìë™ë§¤ë§¤ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” ì¢…í•© íˆ¬ì í”Œë«í¼ì…ë‹ˆë‹¤.

---

## ğŸŒŸ í”„ë¡œì íŠ¸ ê°œìš”

Stockelper-Labì€ í•œêµ­ ì£¼ì‹ ì‹œì¥ íˆ¬ìë¥¼ ìœ„í•œ AI ê¸°ë°˜ í†µí•© í”Œë«í¼ìœ¼ë¡œ, 7ê°œì˜ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ê°€ ìœ ê¸°ì ìœ¼ë¡œ ì—°ë™ë˜ì–´ ë‹¤ìŒê³¼ ê°™ì€ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤:

- **AI íˆ¬ì ìƒë‹´**: GPT-5.1 ê¸°ë°˜ ì‹¤ì‹œê°„ ì±„íŒ… ìƒë‹´
- **í¬íŠ¸í´ë¦¬ì˜¤ ì¶”ì²œ**: íˆ¬ì ì„±í–¥ ë§ì¶¤í˜• í¬íŠ¸í´ë¦¬ì˜¤ ìƒì„± ë° ìµœì í™”
- **ë°±í…ŒìŠ¤íŒ…**: íˆ¬ì ì „ëµ ì‹œë®¬ë ˆì´ì…˜ ë° ì„±ê³¼ ë¶„ì„
- **ì§€ì‹ ê·¸ë˜í”„**: Neo4j ê¸°ë°˜ ê¸°ì—… ê´€ê³„ ë° ì‹œì¥ ë™í–¥ ë¶„ì„
- **ë°ì´í„° íŒŒì´í”„ë¼ì¸**: Apache Airflow ê¸°ë°˜ ìë™í™”ëœ ë°ì´í„° ìˆ˜ì§‘

---

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### ì „ì²´ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Stockelper Workspace                          â”‚
â”‚                  (BMAD ì¤‘ì•™ ë ˆí¬ì§€í† ë¦¬)                            â”‚
â”‚            - ë¬¸ì„œ ë° ì •ì±… ê´€ë¦¬                                      â”‚
â”‚            - ì—ì´ì „íŠ¸ ì •ì˜                                         â”‚
â”‚            - Blueprint & í…œí”Œë¦¿                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                    â”‚                    â”‚
        â–¼                    â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend      â”‚    â”‚ LLM Service   â”‚    â”‚ Portfolio     â”‚
â”‚ (Next.js 15)  â”‚â—„â”€â”€â–ºâ”‚ (LangGraph)   â”‚â—„â”€â”€â–ºâ”‚ Service       â”‚
â”‚ Port: 3000    â”‚    â”‚ Port: 21009   â”‚    â”‚ Port: 21008   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                    â”‚                    â”‚
        â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”           â”‚
        â”‚            â”‚               â”‚           â”‚
        â–¼            â–¼               â–¼           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Backtesting   â”‚ â”‚ Airflow     â”‚ â”‚ KG Builder   â”‚
â”‚ (FastAPI)     â”‚ â”‚ (Pipeline)  â”‚ â”‚ (Neo4j)      â”‚
â”‚ Port: 21011   â”‚ â”‚ Port: 21003 â”‚ â”‚ CLI Tool     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                    â”‚            â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼                    â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PostgreSQL    â”‚    â”‚ MongoDB       â”‚    â”‚ Neo4j         â”‚
â”‚ - ì‚¬ìš©ì ë°ì´í„° â”‚    â”‚ - ë‰´ìŠ¤/ë¦¬í¬íŠ¸  â”‚    â”‚ - ì§€ì‹ ê·¸ë˜í”„  â”‚
â”‚ - ë°±í…ŒìŠ¤íŠ¸ ê²°ê³¼â”‚    â”‚ - ê²½ìŸì‚¬ ì •ë³´  â”‚    â”‚ - ê¸°ì—… ê´€ê³„    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë°ì´í„° íë¦„

```
ì™¸ë¶€ API (DART, KIS, KRX)
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Airflow DAGs    â”‚ â† ì¼ì¼ ìë™ ìˆ˜ì§‘ (00:00, 08:00, 20:10 KST)
â”‚ - ì£¼ê°€ ë°ì´í„°    â”‚
â”‚ - ì¬ë¬´ì œí‘œ       â”‚
â”‚ - ê³µì‹œ ì •ë³´      â”‚
â”‚ - ë‰´ìŠ¤ í¬ë¡¤ë§    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ë°ì´í„°ë² ì´ìŠ¤     â”‚
â”‚ - PostgreSQL    â”‚
â”‚ - MongoDB       â”‚
â”‚ - Neo4j         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LLM ì—ì´ì „íŠ¸     â”‚ â† ì‚¬ìš©ì ì§ˆì˜ ë¶„ì„
â”‚ - ì‹œì¥ ë¶„ì„      â”‚
â”‚ - ì¬ë¬´ ë¶„ì„      â”‚
â”‚ - ê¸°ìˆ ì  ë¶„ì„    â”‚
â”‚ - íˆ¬ì ì „ëµ      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì˜ì‚¬ê²°ì • & ì‹¤í–‰  â”‚
â”‚ - í¬íŠ¸í´ë¦¬ì˜¤ ì¶”ì²œâ”‚
â”‚ - ë°±í…ŒìŠ¤íŒ…       â”‚
â”‚ - ìë™ë§¤ë§¤       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
    Frontend â† ì‚¬ìš©ì
```

---

## ğŸ“ ë ˆí¬ì§€í† ë¦¬ êµ¬ì¡°

```
Stockelper-Lab/
â”œâ”€â”€ stockelper-workspace/        # ì´ ë ˆí¬ì§€í† ë¦¬ (ì¤‘ì•™ ì›Œí¬ìŠ¤í˜ì´ìŠ¤)
â”‚   â”œâ”€â”€ .bmad/                   # BMAD ì„¤ì • ë° ì •ì±…
â”‚   â”œâ”€â”€ docs/                    # í”„ë¡œì íŠ¸ ë¬¸ì„œ
â”‚   â”œâ”€â”€ scripts/                 # ìœ í‹¸ë¦¬í‹° ìŠ¤í¬ë¦½íŠ¸
â”‚   â””â”€â”€ README.md               # ì¢…í•© ê°€ì´ë“œ (ì´ íŒŒì¼)
â”‚
â”œâ”€â”€ stockelper-fe/               # í”„ë¡ íŠ¸ì—”ë“œ
â”‚   â”œâ”€â”€ src/app/                # Next.js 15 ì•±
â”‚   â”œâ”€â”€ prisma/                 # Prisma ORM ìŠ¤í‚¤ë§ˆ
â”‚   â””â”€â”€ README.md
â”‚
â”œâ”€â”€ stockelper-llm/              # LLM ë©€í‹° ì—ì´ì „íŠ¸
â”‚   â”œâ”€â”€ src/                    # LangGraph ì—ì´ì „íŠ¸
â”‚   â”œâ”€â”€ legacy/                 # ë ˆê±°ì‹œ ì½”ë“œ ë³´ê´€
â”‚   â””â”€â”€ README.md
â”‚
â”œâ”€â”€ stockelper-portfolio/        # í¬íŠ¸í´ë¦¬ì˜¤ ì¶”ì²œ
â”‚   â”œâ”€â”€ src/                    # LangGraph ì›Œí¬í”Œë¡œìš°
â”‚   â””â”€â”€ README.md
â”‚
â”œâ”€â”€ stockelper-backtesting/      # ë°±í…ŒìŠ¤íŒ… ì„œë¹„ìŠ¤
â”‚   â”œâ”€â”€ src/                    # FastAPI + Worker
â”‚   â”œâ”€â”€ migrations/             # DB ë§ˆì´ê·¸ë ˆì´ì…˜
â”‚   â””â”€â”€ README.md
â”‚
â”œâ”€â”€ stockelper-airflow/          # ë°ì´í„° íŒŒì´í”„ë¼ì¸
â”‚   â”œâ”€â”€ dags/                   # Airflow DAG ì •ì˜
â”‚   â”œâ”€â”€ modules/                # Python ëª¨ë“ˆ
â”‚   â””â”€â”€ README.md
â”‚
â”œâ”€â”€ stockelper-kg/               # ì§€ì‹ ê·¸ë˜í”„ ë¹Œë”
â”‚   â”œâ”€â”€ src/stockelper_kg/      # ë°ì´í„° ìˆ˜ì§‘ ë° ê·¸ë˜í”„ êµ¬ì¶•
â”‚   â””â”€â”€ README.md
â”‚
â””â”€â”€ stockelper-news-crawler/     # ë‰´ìŠ¤ í¬ë¡¤ëŸ¬
    â”œâ”€â”€ src/                    # ë„¤ì´ë²„/í† ìŠ¤ í¬ë¡¤ëŸ¬
    â””â”€â”€ README.md
```

---

## ğŸš€ ë¹ ë¥¸ ì‹œì‘ (ì „ì²´ ì‹œìŠ¤í…œ êµ¬ì¶•)

ì´ ì„¹ì…˜ì€ Stockelper ì „ì²´ ì‹œìŠ¤í…œì„ ì²˜ìŒë¶€í„° êµ¬ì¶•í•˜ëŠ” ì¢…í•© ê°€ì´ë“œì…ë‹ˆë‹¤.

### ì‚¬ì „ ìš”êµ¬ì‚¬í•­

#### ì‹œìŠ¤í…œ ìš”êµ¬ì‚¬í•­
- **OS**: Linux, macOS, Windows with WSL2
- **RAM**: 16GB ì´ìƒ (32GB ê¶Œì¥)
- **Storage**: 50GB ì´ìƒ ì—¬ìœ  ê³µê°„
- **Network**: ì•ˆì •ì ì¸ ì¸í„°ë„· ì—°ê²°

#### í•„ìˆ˜ ì†Œí”„íŠ¸ì›¨ì–´

```bash
# Docker & Docker Compose (24.0+)
docker --version
docker-compose --version

# Python 3.12
python3 --version

# Node.js 20+ & pnpm 9+
node --version
pnpm --version  # ì„¤ì¹˜: npm install -g pnpm

# uv (Python íŒ¨í‚¤ì§€ ê´€ë¦¬ì)
curl -LsSf https://astral.sh/uv/install.sh | sh
```

#### í•„ìˆ˜ API í‚¤

| ì„œë¹„ìŠ¤ | ëª©ì  | ë“±ë¡ URL |
|--------|------|----------|
| **OpenDART** | ê¸ˆìœµ ê³µì‹œ ë°ì´í„° | https://opendart.fss.or.kr/ |
| **KIS OpenAPI** | ì£¼ì‹ ê±°ë˜ | https://apiportal.koreainvestment.com/ |
| **OpenAI** | LLM ì¶”ë¡  (GPT-4/5.1) | https://platform.openai.com/ |
| **OpenRouter** | ë‰´ìŠ¤ ê²€ìƒ‰ (Perplexity) | https://openrouter.ai/ |

---

## ğŸ“¦ ì„œë¹„ìŠ¤ë³„ ê°œìš”

### 1. Frontend (stockelper-fe)

**Next.js 15 ê¸°ë°˜ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜**

#### ê¸°ìˆ  ìŠ¤íƒ
- Next.js 15.3, React 19.1, TypeScript 5.8
- Tailwind CSS 4.1, Radix UI
- Prisma ORM 6.6
- TanStack React Query 5.90

#### ì£¼ìš” ê¸°ëŠ¥
- íšŒì›ê°€ì… ë° ë¡œê·¸ì¸ (JWT ì¸ì¦)
- íˆ¬ì ì„±í–¥ ì„¤ë¬¸ì¡°ì‚¬ (8ê°€ì§€ ì§ˆë¬¸)
- AI ì±„íŒ… ì¸í„°í˜ì´ìŠ¤ (SSE ìŠ¤íŠ¸ë¦¬ë°)
- ë°±í…ŒìŠ¤íŒ… ìš”ì²­ ë° ê²°ê³¼ ì¡°íšŒ
- í¬íŠ¸í´ë¦¬ì˜¤ ì¶”ì²œ ì¡°íšŒ
- KIS API ì„¤ì • ê´€ë¦¬

#### í˜ì´ì§€ êµ¬ì¡°
```
/sign-in              # ë¡œê·¸ì¸
/sign-up              # íšŒì›ê°€ì… (2ë‹¨ê³„: ê³„ì • ì •ë³´ + ì„¤ë¬¸ì¡°ì‚¬)
/dashboard            # ëŒ€ì‹œë³´ë“œ
/chat                 # AI ì±„íŒ…
/chat/[id]            # ê°œë³„ ëŒ€í™”
/analysis             # ë¶„ì„
/backtesting          # ë°±í…ŒìŠ¤íŒ…
/portfolio            # í¬íŠ¸í´ë¦¬ì˜¤
/settings/account     # ê³„ì • ì„¤ì •
/settings/kis         # KIS API ì„¤ì •
/settings/survey      # íˆ¬ì ì„±í–¥ ì¬í‰ê°€
```

#### ì„¤ì¹˜ ë° ì‹¤í–‰
```bash
cd stockelper-fe

# ì˜ì¡´ì„± ì„¤ì¹˜
pnpm install

# í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
cp .env.example .env
# DATABASE_URL, JWT_SECRET, LLM_ENDPOINT ì„¤ì •

# Prisma ì„¤ì •
pnpm prisma:generate
pnpm prisma:migrate

# ê°œë°œ ì„œë²„ ì‹¤í–‰
pnpm dev
# â†’ http://localhost:3000

# í”„ë¡œë•ì…˜ ë¹Œë“œ ë° ì‹¤í–‰
pnpm build
pnpm start
```

---

### 2. LLM Service (stockelper-llm)

**LangGraph ê¸°ë°˜ ë‹¤ì¤‘ ì—ì´ì „íŠ¸ AI ë¶„ì„ ì„œë¹„ìŠ¤**

#### ê¸°ìˆ  ìŠ¤íƒ
- FastAPI 0.111, LangGraph, LangChain 1.0+
- OpenAI GPT-4/GPT-5.1
- Prophet & ARIMA (ì£¼ê°€ ì˜ˆì¸¡)
- PostgreSQL, Neo4j, Redis

#### ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œ

**SupervisorAgent**: ì‚¬ìš©ì ì§ˆì˜ ë¼ìš°íŒ… ë° ê±°ë˜ ì•¡ì…˜ ìƒì„±

**ì „ë¬¸ ì—ì´ì „íŠ¸ (4ê°œ)**:

1. **MarketAnalysisAgent** (ì‹œì¥ ë¶„ì„)
   - ë‰´ìŠ¤ ê²€ìƒ‰ (Perplexity API)
   - ë¦¬í¬íŠ¸ ê°ì • ë¶„ì„
   - YouTube íˆ¬ì ì½˜í…ì¸  ë¶„ì„
   - Neo4j ê·¸ë˜í”„ QA

2. **FundamentalAnalysisAgent** (ê¸°ë³¸ì  ë¶„ì„)
   - DART ì¬ë¬´ì œí‘œ ë¶„ì„ (5ê°œë…„)
   - ì¬ë¬´ ê±´ì „ì„± í‰ê°€ (ìœ ë™ë¹„ìœ¨, ë¶€ì±„ë¹„ìœ¨, ROE ë“±)

3. **TechnicalAnalysisAgent** (ê¸°ìˆ ì  ë¶„ì„)
   - KIS API ì‹¤ì‹œê°„ ì£¼ê°€ ì¡°íšŒ
   - Prophet + ARIMA ì•™ìƒë¸” ì˜ˆì¸¡
   - ì°¨íŠ¸ íŒ¨í„´ ë¶„ì„ (GPT-4 Vision)

4. **InvestmentStrategyAgent** (íˆ¬ì ì „ëµ)
   - KIS ê³„ì¢Œ ì¡°íšŒ
   - íˆ¬ì ì „ëµ ì›¹ ê²€ìƒ‰
   - í¬íŠ¸í´ë¦¬ì˜¤ ì œì•ˆ

#### ì„¤ì¹˜ ë° ì‹¤í–‰
```bash
cd stockelper-llm

# ì˜ì¡´ì„± ì„¤ì¹˜
uv sync

# í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
cp env.example .env
# OPENAI_API_KEY, KIS_BASE_URL, DATABASE_URL ë“± ì„¤ì •

# ì„œë²„ ì‹¤í–‰
uv run python src/main.py
# â†’ http://localhost:21009

# Docker ì‹¤í–‰
docker-compose up -d
docker-compose logs -f llm-server
```

#### API ì—”ë“œí¬ì¸íŠ¸
- `POST /stock/chat`: SSE ìŠ¤íŠ¸ë¦¬ë° ì±„íŒ…
- `POST /internal/backtesting/interpret`: ë°±í…ŒìŠ¤íŠ¸ ê²°ê³¼ í•´ì„
- `GET /health`: í—¬ìŠ¤ ì²´í¬

---

### 3. Portfolio Service (stockelper-portfolio)

**LangGraph ê¸°ë°˜ í¬íŠ¸í´ë¦¬ì˜¤ ì¶”ì²œ ë° ìë™ë§¤ë§¤**

#### ê¸°ìˆ  ìŠ¤íƒ
- FastAPI, LangGraph
- Black-Litterman ëª¨ë¸
- KIS API, DART API
- PostgreSQL

#### ë§¤ìˆ˜ ì›Œí¬í”Œë¡œìš°
```
Ranking (11ê°œ ì§€í‘œ) â†’ Analysis (ë³‘ë ¬ 3ê°œ) â†’ ViewGenerator
  â†’ PortfolioBuilder â†’ PortfolioTrader
```

**11ê°œ ë­í‚¹ ì§€í‘œ**:
- ê±°ë˜ í™œë™ì„±, ì˜ì—…ì´ìµë¥ , ì„±ì¥ë¥ , ë¶€ì±„ ìˆ˜ì¤€
- ìƒìŠ¹ë¥ , ì•ˆì •ì„±, ìˆœì´ìµ, í•˜ë½ë¥ 
- ì‹œê°€ì´ì•¡, ROE, ìœ ë™ë¹„ìœ¨

#### ë§¤ë„ ì›Œí¬í”Œë¡œìš°
```
GetHoldings â†’ Analysis (ë³‘ë ¬ 3ê°œ) â†’ SellDecisionMaker
  â†’ PortfolioSeller
```

#### ì„¤ì¹˜ ë° ì‹¤í–‰
```bash
cd stockelper-portfolio

# ì˜ì¡´ì„± ì„¤ì¹˜
uv sync --dev

# í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
cp env.example .env

# ì„œë²„ ì‹¤í–‰
PORT=21008 uv run python src/main.py
# â†’ http://localhost:21008

# Docker ì‹¤í–‰
docker-compose up -d
```

#### API ì—”ë“œí¬ì¸íŠ¸
- `POST /portfolio/recommendations`: í¬íŠ¸í´ë¦¬ì˜¤ ì¶”ì²œ
- `POST /portfolio/buy`: ë§¤ìˆ˜ ì›Œí¬í”Œë¡œìš° ì‹¤í–‰
- `POST /portfolio/sell`: ë§¤ë„ ì›Œí¬í”Œë¡œìš° ì‹¤í–‰

---

### 4. Backtesting Service (stockelper-backtesting)

**FastAPI ê¸°ë°˜ ë¹„ë™ê¸° ë°±í…ŒìŠ¤íŒ… ì„œë¹„ìŠ¤**

#### ê¸°ìˆ  ìŠ¤íƒ
- FastAPI, Backtrader
- PostgreSQL (ì‘ì—… í)
- Prophet, ARIMA
- FinanceDataReader, OpenDartReader

#### ì•„í‚¤í…ì²˜
```
FastAPI Server â†’ PostgreSQL (ì‘ì—… í) â†’ Background Worker
   â†“                                          â†“
placeholder row ìƒì„±                    ë°±í…ŒìŠ¤íŠ¸ ì‹¤í–‰
                                             â†“
                                      ê²°ê³¼ íŒŒì¼ ì €ì¥ (JSON, MD)
                                             â†“
                                      DB ì—…ë°ì´íŠ¸ (result_file_path)
                                             â†“
                                      LLM í•´ì„ ìš”ì²­ (ì„ íƒ)
```

#### ì„¤ì¹˜ ë° ì‹¤í–‰
```bash
cd stockelper-backtesting

# ì˜ì¡´ì„± ì„¤ì¹˜
uv sync

# í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
cp env.example .env

# ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰
psql -U postgres -d stockelper_web -f migrations/001_create_public_backtesting.sql
psql -U postgres -d stockelper_web -f migrations/002_add_backtesting_analysis_columns.sql

# ì„œë²„ ì‹¤í–‰
uv run python src/main.py
# â†’ http://localhost:21011

# ì›Œì»¤ ì‹¤í–‰ (ë³„ë„ í„°ë¯¸ë„)
PYTHONPATH=src uv run python -m backtesting.worker

# Docker ì‹¤í–‰
docker-compose up -d
docker-compose logs -f backtesting-server
docker-compose logs -f backtest-worker
```

#### API ì—”ë“œí¬ì¸íŠ¸
- `POST /api/backtesting/execute`: ë°±í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ìš”ì²­
- `GET /api/backtesting/{job_id}/status`: ì‘ì—… ìƒíƒœ ì¡°íšŒ
- `GET /api/backtesting/{job_id}/result`: ë°±í…ŒìŠ¤íŠ¸ ê²°ê³¼ ì¡°íšŒ

---

### 5. Airflow (stockelper-airflow)

**Apache Airflow ê¸°ë°˜ ë°ì´í„° ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ íŒŒì´í”„ë¼ì¸**

#### ê¸°ìˆ  ìŠ¤íƒ
- Apache Airflow 2.10.4
- PostgreSQL, MongoDB, Neo4j
- Selenium 4.27+ (ì›¹ ìŠ¤í¬ë˜í•‘)
- FinanceDataReader

#### DAG ê°œìš”

| DAG | ìŠ¤ì¼€ì¤„ | ì„¤ëª… |
|-----|--------|------|
| `stock_report_crawler_dag` | ë§¤ì¼ 00:00 UTC | ê¸ˆìœµ ë¦¬í¬íŠ¸ í¬ë¡¤ë§ â†’ MongoDB |
| `competitor_crawler_dag` | ë§¤ì¼ 00:00 UTC | Wisereport ê²½ìŸì‚¬ ì •ë³´ â†’ MongoDB |
| `stock_to_postgres_dag` | @daily | KRX ì¼ì¼ ì£¼ê°€ â†’ PostgreSQL |
| `dart_disclosure_collection_dag` | ë§¤ì¼ 08:00 KST | DART ê³µì‹œ 36ê°œ ìœ í˜• â†’ PostgreSQL |
| `neo4j_kg_etl_dag` | ë§¤ì¼ 20:10 KST | Neo4j ì§€ì‹ ê·¸ë˜í”„ êµ¬ì¶• |
| `neo4j_kg_rebuild_dag` | ìˆ˜ë™ íŠ¸ë¦¬ê±° | Neo4j ì „ì²´ ì¬êµ¬ì¶• |
| `log_cleanup_dag` | ë§¤ì¼ 02:00 UTC | 7ì¼ ì´ìƒ ë¡œê·¸ ì •ë¦¬ |

#### ì„¤ì¹˜ ë° ì‹¤í–‰
```bash
cd stockelper-airflow

# í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
cp .env.example .env

# Docker ë„¤íŠ¸ì›Œí¬ ìƒì„±
./scripts/setup_network.sh

# Docker Compose ë°°í¬
./scripts/deploy.sh

# Airflow UI ì ‘ì†
# â†’ http://localhost:21003
# ì‚¬ìš©ìëª…: admin, ë¹„ë°€ë²ˆí˜¸: admin (ë˜ëŠ” .env ì„¤ì •ê°’)

# ë¡œê·¸ í™•ì¸
docker logs stockelper-airflow
```

---

### 6. Knowledge Graph Builder (stockelper-kg)

**Neo4j ê¸°ë°˜ í•œêµ­ ì£¼ì‹ ì‹œì¥ ì§€ì‹ ê·¸ë˜í”„ êµ¬ì¶•**

#### ê¸°ìˆ  ìŠ¤íƒ
- Python 3.12, Neo4j 5.11+
- KRX, KIS, DART, MongoDB í†µí•©
- GPT-4 (ì´ë²¤íŠ¸ ë¶„ë¥˜)

#### ë°ì´í„° ìˆ˜ì§‘ê¸°
- **KRXCollector**: ìƒì¥ ì¢…ëª© ì •ë³´
- **KISCollector**: ì‹¤ì‹œê°„ ì£¼ê°€
- **DartCollector**: ì¬ë¬´ì œí‘œ (5ê°œë…„)
- **MongoDBCollector**: ê²½ìŸì‚¬ ê´€ê³„
- **EventCollector**: ë‰´ìŠ¤/ì´ë²¤íŠ¸

#### ê·¸ë˜í”„ êµ¬ì¡°

**ë…¸ë“œ íƒ€ì…**:
- `Company`: ìƒì¥ ê¸°ì—…
- `StockPrice`: ì¼ë³„ ì£¼ê°€ ìŠ¤ëƒ…ìƒ·
- `Date`: ìº˜ë¦°ë” ë‚ ì§œ
- `Event`: ê¸°ì—… ì´ë²¤íŠ¸
- `Document`: ì›ë³¸ ë¬¸ì„œ

**ê´€ê³„ íƒ€ì…**:
- `HAS_SNAPSHOT`: Company â†’ StockPrice
- `MENTIONS`: Event â†’ Company
- `COMPETES_WITH`: Company â†” Company
- `OCCURRED_ON`: Event â†’ Date

#### ì„¤ì¹˜ ë° ì‹¤í–‰
```bash
cd stockelper-kg

# Neo4j ì‹œì‘
docker compose up -d
# â†’ http://localhost:21004 (Browser)
# â†’ bolt://localhost:21005 (Bolt)

# í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
cp .env.example .env

# ì˜ì¡´ì„± ì„¤ì¹˜
uv sync

# ì§€ì‹ ê·¸ë˜í”„ êµ¬ì¶• (ìŠ¤íŠ¸ë¦¬ë° ëª¨ë“œ ê¶Œì¥)
uv run stockelper-kg --date_st 20250101 --date_fn 20250101 --streaming

# ë³‘ë ¬ ì²˜ë¦¬ (4ê°œ ì›Œì»¤)
uv run stockelper-kg --date_st 20250101 --date_fn 20250107 --streaming --max-workers 4

# ê¸°ì¡´ ê·¸ë˜í”„ì— ìƒˆ ë‚ ì§œ ì¶”ê°€
uv run stockelper-kg --date_st 20250110 --date_fn 20250110 --streaming --update-only

# ë‰´ìŠ¤ ì´ë²¤íŠ¸ ì²˜ë¦¬
uv run stockelper-kg-events --file data/news_articles/article.txt
uv run stockelper-kg-events --dir data/news_articles
```

#### Cypher ì¿¼ë¦¬ ì˜ˆì‹œ
```cypher
-- ì‚¼ì„±ì „ìì˜ 2025ë…„ ëª¨ë“  ì´ë²¤íŠ¸ ì¡°íšŒ
MATCH (c:Company {name: 'ì‚¼ì„±ì „ì'})<-[:MENTIONS]-(e:Event)-[:OCCURRED_ON]->(d:Date)
WHERE d.date >= '20250101' AND d.date <= '20251231'
RETURN e.type, e.description, d.date
ORDER BY d.date DESC

-- ê²½ìŸì‚¬ ë„¤íŠ¸ì›Œí¬ ì¡°íšŒ
MATCH (c:Company {name: 'ì‚¼ì„±ì „ì'})-[:COMPETES_WITH]-(competitor:Company)
RETURN competitor.name, competitor.code, competitor.market
```

---

### 7. News Crawler (stockelper-news-crawler)

**ë„¤ì´ë²„/í† ìŠ¤ì¦ê¶Œ ë‰´ìŠ¤ í¬ë¡¤ëŸ¬**

#### ê¸°ìˆ  ìŠ¤íƒ
- Python 3.11+
- BeautifulSoup4, Requests
- MongoDB
- Typer (CLI)

#### í¬ë¡¤ëŸ¬ ë¹„êµ

| í¬ë¡¤ëŸ¬ | ë°ì´í„° ì†ŒìŠ¤ | ë°©ì‹ | í˜ì´ì§€ë„¤ì´ì…˜ |
|--------|------------|------|-------------|
| **Naver** | ë„¤ì´ë²„ ì¦ê¶Œ | HTML íŒŒì‹± | í˜ì´ì§€ ë‹¨ìœ„ |
| **Toss** | í† ìŠ¤ì¦ê¶Œ | REST API | ì»¤ì„œ ê¸°ë°˜ |

#### ì„¤ì¹˜ ë° ì‹¤í–‰
```bash
cd stockelper-news-crawler

# ì˜ì¡´ì„± ì„¤ì¹˜
uv sync

# í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
cp env.example .env

# MongoDB ì‹œì‘ (Docker)
docker run -d -p 27017:27017 --name mongodb mongo:7

# ë„¤ì´ë²„ í¬ë¡¤ëŸ¬ ì‹¤í–‰
uv run python -m naver_news_crawler \
  --stock-code 005930 \
  --from-date 2024-01-01

# í† ìŠ¤ í¬ë¡¤ëŸ¬ ì‹¤í–‰
uv run python -m toss_news_crawler \
  --stock-code 005930 \
  --from-date 2024-01-01 \
  --limit 100
```

---

## ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ì•„í‚¤í…ì²˜

### PostgreSQL (3ê°œ ë°ì´í„°ë² ì´ìŠ¤)

#### 1. stockelper_web
ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°ì´í„°

**ì£¼ìš” í…Œì´ë¸”**:
- `users`: ì‚¬ìš©ì ì •ë³´ (KIS API ìê²©ì¦ëª… í¬í•¨)
- `survey`: íˆ¬ì ì„±í–¥ ì„¤ë¬¸ ë‹µë³€
- `conversations`: ì±„íŒ… ëŒ€í™”ë°©
- `chats`: ì±„íŒ… ë©”ì‹œì§€
- `portfolio_recommendations`: í¬íŠ¸í´ë¦¬ì˜¤ ì¶”ì²œ ì´ë ¥
- `backtesting`: ë°±í…ŒìŠ¤íŠ¸ ì‘ì—… ë° ê²°ê³¼

#### 2. checkpoint
LangGraph ìƒíƒœ ì²´í¬í¬ì¸íŠ¸

**ì£¼ìš” í…Œì´ë¸”**:
- `checkpoints`: ì—ì´ì „íŠ¸ ì‹¤í–‰ ìƒíƒœ ìŠ¤ëƒ…ìƒ·
- `checkpoint_writes`: ì²´í¬í¬ì¸íŠ¸ ì“°ê¸° ë¡œê·¸

#### 3. ksic
í•œêµ­ í‘œì¤€ ì‚°ì—… ë¶„ë¥˜ ì½”ë“œ

**ì£¼ìš” í…Œì´ë¸”**:
- `ksic_codes`: ì‚°ì—… ë¶„ë¥˜ ì½”ë“œ ë° ì„¤ëª…

### MongoDB (1ê°œ ë°ì´í„°ë² ì´ìŠ¤)

#### stockelper
ë¹„ì •í˜• ë°ì´í„° ì €ì¥ì†Œ

**ì£¼ìš” ì»¬ë ‰ì…˜**:
- `stock_reports`: ê¸ˆìœµ ë¦¬í¬íŠ¸
- `competitors`: ê²½ìŸì‚¬ ì •ë³´
- `naver_stock_news`: ë„¤ì´ë²„ ë‰´ìŠ¤
- `toss_stock_news`: í† ìŠ¤ ë‰´ìŠ¤

### Neo4j (1ê°œ ë°ì´í„°ë² ì´ìŠ¤)

#### neo4j
ì§€ì‹ ê·¸ë˜í”„

**ë…¸ë“œ ë ˆì´ë¸”**:
- `Company`, `StockPrice`, `Date`, `Event`, `Document`

**ê´€ê³„ íƒ€ì…**:
- `HAS_SNAPSHOT`, `MENTIONS`, `COMPETES_WITH`, `OCCURRED_ON`

---

## ğŸ”§ ì „ì²´ ì‹œìŠ¤í…œ ì„¤ì • ê°€ì´ë“œ

### Step 1: ì €ì¥ì†Œ í´ë¡ 

```bash
# ì‘ì—… ë””ë ‰í† ë¦¬ ìƒì„±
mkdir -p ~/stockelper-lab
cd ~/stockelper-lab

# Workspace í´ë¡ 
git clone https://github.com/Stockelper-Lab/stockelper-workspace.git
cd stockelper-workspace

# ëª¨ë“  ì„œë¹„ìŠ¤ ë ˆí¬ í´ë¡  (ìƒìœ„ ë””ë ‰í† ë¦¬ì—)
cd ..
git clone https://github.com/Stockelper-Lab/stockelper-fe.git
git clone https://github.com/Stockelper-Lab/stockelper-kg.git
git clone https://github.com/Stockelper-Lab/stockelper-llm.git
git clone https://github.com/Stockelper-Lab/stockelper-airflow.git
git clone https://github.com/Stockelper-Lab/stockelper-portfolio.git
git clone https://github.com/Stockelper-Lab/stockelper-backtesting.git
git clone https://github.com/Stockelper-Lab/stockelper-news-crawler.git

# ë””ë ‰í† ë¦¬ êµ¬ì¡°:
# ~/stockelper-lab/
#   â”œâ”€â”€ stockelper-workspace/
#   â”œâ”€â”€ stockelper-fe/
#   â”œâ”€â”€ stockelper-kg/
#   â”œâ”€â”€ stockelper-llm/
#   â”œâ”€â”€ stockelper-airflow/
#   â”œâ”€â”€ stockelper-portfolio/
#   â”œâ”€â”€ stockelper-backtesting/
#   â””â”€â”€ stockelper-news-crawler/
```

### Step 2: ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •

```bash
cd ~/stockelper-lab/stockelper-workspace

# docker-compose.databases.yml ìƒì„±
cat > docker-compose.databases.yml << 'EOF'
version: '3.8'

networks:
  stockelper:
    driver: bridge

services:
  postgres:
    image: postgres:16-alpine
    container_name: stockelper-postgres
    environment:
      POSTGRES_USER: stockelper
      POSTGRES_PASSWORD: your_secure_password_here
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data
    networks:
      - stockelper
    restart: unless-stopped

  mongodb:
    image: mongo:7-jammy
    container_name: stockelper-mongodb
    environment:
      MONGO_INITDB_ROOT_USERNAME: stockelper
      MONGO_INITDB_ROOT_PASSWORD: your_secure_password_here
      MONGO_INITDB_DATABASE: stockelper
    ports:
      - "27017:27017"
    volumes:
      - mongodb_data:/data/db
    networks:
      - stockelper
    restart: unless-stopped

  neo4j:
    image: neo4j:5.11-community
    container_name: stockelper-neo4j
    environment:
      NEO4J_AUTH: neo4j/your_secure_password_here
      NEO4J_PLUGINS: '["apoc"]'
    ports:
      - "7474:7474"
      - "7687:7687"
    volumes:
      - neo4j_data:/data
      - neo4j_logs:/logs
    networks:
      - stockelper
    restart: unless-stopped

volumes:
  postgres_data:
  mongodb_data:
  neo4j_data:
  neo4j_logs:
EOF

# ë°ì´í„°ë² ì´ìŠ¤ ì‹œì‘
docker-compose -f docker-compose.databases.yml up -d

# ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™” ëŒ€ê¸°
sleep 30
```

### Step 3: PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™”

```bash
# í•„ìˆ˜ ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±
docker exec -it stockelper-postgres psql -U stockelper -c "CREATE DATABASE stockelper_web;"
docker exec -it stockelper-postgres psql -U stockelper -c "CREATE DATABASE checkpoint;"
docker exec -it stockelper-postgres psql -U stockelper -c "CREATE DATABASE ksic;"
docker exec -it stockelper-postgres psql -U stockelper -c "CREATE DATABASE airflow;"

# ë°ì´í„°ë² ì´ìŠ¤ í™•ì¸
docker exec -it stockelper-postgres psql -U stockelper -c "\l"
```

### Step 4: Neo4j ì´ˆê¸°í™”

```bash
# Neo4j ë¸Œë¼ìš°ì €: http://localhost:7474
# ë¡œê·¸ì¸: neo4j / your_secure_password_here

# ë˜ëŠ” CLIë¡œ ì œì•½ì¡°ê±´ ìƒì„±
docker exec -it stockelper-neo4j cypher-shell -u neo4j -p your_secure_password_here << 'EOF'
CREATE CONSTRAINT company_code IF NOT EXISTS FOR (c:Company) REQUIRE c.code IS UNIQUE;
CREATE CONSTRAINT date_value IF NOT EXISTS FOR (d:Date) REQUIRE d.value IS UNIQUE;
CREATE CONSTRAINT event_id IF NOT EXISTS FOR (e:Event) REQUIRE e.id IS UNIQUE;
CREATE INDEX company_name IF NOT EXISTS FOR (c:Company) ON (c.name);
CREATE INDEX event_date IF NOT EXISTS FOR (e:Event) ON (e.date);
EOF
```

### Step 5: í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

ê° ì„œë¹„ìŠ¤ë³„ `.env` íŒŒì¼ ì„¤ì •:

```bash
cd ~/stockelper-lab

# Frontend
cat > stockelper-fe/.env << 'EOF'
DATABASE_URL=postgresql://stockelper:your_secure_password_here@localhost:5432/stockelper_web
JWT_SECRET=your_super_secret_jwt_key_minimum_32_characters_long
JWT_EXPIRES_IN=7d
COOKIE_NAME=auth-token
LLM_ENDPOINT=http://localhost:21009
NODE_ENV=development
EOF

# LLM Service
cat > stockelper-llm/.env << 'EOF'
# AI Services
OPENAI_API_KEY=sk-your_openai_key_here
OPENROUTER_API_KEY=sk-or-your_openrouter_key_here
OPEN_DART_API_KEY=your_dart_api_key_here

# KIS API
KIS_BASE_URL=https://openapivts.koreainvestment.com:29443

# Databases
DATABASE_URL=postgresql://stockelper:your_secure_password_here@localhost:5432/stockelper_web
ASYNC_DATABASE_URL=postgresql+asyncpg://stockelper:your_secure_password_here@localhost:5432/stockelper_web
CHECKPOINT_DATABASE_URI=postgresql://stockelper:your_secure_password_here@localhost:5432/checkpoint

# Neo4j
NEO4J_URI=bolt://localhost:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=your_secure_password_here
EOF

# Portfolio Service
cat > stockelper-portfolio/.env << 'EOF'
HOST=0.0.0.0
PORT=21008
DATABASE_URL=postgresql://stockelper:your_secure_password_here@localhost:5432/stockelper_web
ASYNC_DATABASE_URL=postgresql+asyncpg://stockelper:your_secure_password_here@localhost:5432/stockelper_web
OPEN_DART_API_KEY=your_dart_api_key_here
OPENROUTER_API_KEY=sk-or-your_openrouter_key_here
EOF

# Backtesting Service
cat > stockelper-backtesting/.env << 'EOF'
DATABASE_URL=postgresql://stockelper:your_secure_password_here@localhost:5432/stockelper_web
HOST=0.0.0.0
PORT=21011
BACKTEST_WORKER_POLL_SECONDS=5
EOF

# Knowledge Graph
cat > stockelper-kg/.env << 'EOF'
OPEN_DART_API_KEY=your_dart_api_key_here
KIS_APP_KEY=your_kis_app_key_here
KIS_APP_SECRET=your_kis_app_secret_here
NEO4J_URI=bolt://localhost:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=your_secure_password_here
DB_URI=mongodb://stockelper:your_secure_password_here@localhost:27017
DB_NAME=stockelper
OPENAI_API_KEY=sk-your_openai_key_here
EOF

# Airflow
cat > stockelper-airflow/.env << 'EOF'
MONGODB_URI=mongodb://stockelper:your_secure_password_here@localhost:27017
MONGO_DATABASE=stockelper
NEO4J_URI=bolt://localhost:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=your_secure_password_here
AIRFLOW__DATABASE__SQL_ALCHEMY_CONN=postgresql://stockelper:your_secure_password_here@localhost:5432/airflow
OPEN_DART_API_KEY=your_dart_api_key_here
EOF

# News Crawler
cat > stockelper-news-crawler/.env << 'EOF'
MONGODB_URI=mongodb://stockelper:your_secure_password_here@localhost:27017
MONGODB_DATABASE=stockelper
MONGODB_COLLECTION=naver_stock_news
EOF

echo "âœ… ëª¨ë“  .env íŒŒì¼ ìƒì„± ì™„ë£Œ!"
echo "âš ï¸  ê° .env íŒŒì¼ì„ ì—´ì–´ ì‹¤ì œ API í‚¤ì™€ ë¹„ë°€ë²ˆí˜¸ë¡œ êµì²´í•˜ì„¸ìš”."
```

### Step 6: ì˜ì¡´ì„± ì„¤ì¹˜

```bash
cd ~/stockelper-lab

# Frontend
cd stockelper-fe
pnpm install
pnpm prisma:generate
pnpm prisma:migrate

# LLM Service
cd ../stockelper-llm
uv sync

# Portfolio Service
cd ../stockelper-portfolio
uv sync

# Backtesting Service
cd ../stockelper-backtesting
uv sync

# KG Builder
cd ../stockelper-kg
uv sync

# News Crawler
cd ../stockelper-news-crawler
uv sync

# Airflow
cd ../stockelper-airflow
pip install -r requirements.txt
```

### Step 7: ì„œë¹„ìŠ¤ ì‹œì‘

#### í„°ë¯¸ë„ 1: Frontend
```bash
cd ~/stockelper-lab/stockelper-fe
pnpm dev
# â†’ http://localhost:3000
```

#### í„°ë¯¸ë„ 2: LLM Service
```bash
cd ~/stockelper-lab/stockelper-llm
uv run python src/main.py
# â†’ http://localhost:21009
```

#### í„°ë¯¸ë„ 3: Portfolio Service
```bash
cd ~/stockelper-lab/stockelper-portfolio
PORT=21008 uv run python src/main.py
# â†’ http://localhost:21008
```

#### í„°ë¯¸ë„ 4: Backtesting Server
```bash
cd ~/stockelper-lab/stockelper-backtesting
uv run python src/main.py
# â†’ http://localhost:21011
```

#### í„°ë¯¸ë„ 5: Backtesting Worker
```bash
cd ~/stockelper-lab/stockelper-backtesting
uv run python src/backtesting/worker.py
```

#### í„°ë¯¸ë„ 6: Airflow
```bash
cd ~/stockelper-lab/stockelper-airflow
export AIRFLOW_HOME=$(pwd)
airflow db init
airflow users create --username admin --password admin --firstname Admin --lastname User --role Admin --email admin@stockelper.local
airflow scheduler &
airflow webserver --port 21003
# â†’ http://localhost:21003
```

### Step 8: ì´ˆê¸° ë°ì´í„° ìˆ˜ì§‘

```bash
# 1. ì§€ì‹ ê·¸ë˜í”„ êµ¬ì¶• (ìµœê·¼ 10ì¼)
cd ~/stockelper-lab/stockelper-kg
uv run stockelper-kg --date_st 20250101 --date_fn 20250110 --streaming

# 2. DART ê³µì‹œ ìˆ˜ì§‘
# Airflow UI ì ‘ì†: http://localhost:21003
# ë¡œê·¸ì¸: admin / admin
# DAG í™œì„±í™” ë° íŠ¸ë¦¬ê±°: dart_disclosure_collection_dag

# 3. ì£¼ê°€ ë°ì´í„° ìˆ˜ì§‘
# DAG íŠ¸ë¦¬ê±°: stock_to_postgres_dag

# 4. ê²½ìŸì‚¬ ë°ì´í„° ìˆ˜ì§‘
# DAG íŠ¸ë¦¬ê±°: competitor_crawler_dag
```

---

## ğŸŒ ì„œë¹„ìŠ¤ URL ë° í¬íŠ¸

| ì„œë¹„ìŠ¤ | URL | í¬íŠ¸ | ì¸ì¦ ì •ë³´ |
|--------|-----|------|----------|
| **Frontend** | http://localhost:3000 | 3000 | íšŒì›ê°€ì… í•„ìš” |
| **LLM API** | http://localhost:21009/docs | 21009 | API ë¬¸ì„œ |
| **Portfolio API** | http://localhost:21008/docs | 21008 | API ë¬¸ì„œ |
| **Backtesting API** | http://localhost:21011/docs | 21011 | API ë¬¸ì„œ |
| **Airflow UI** | http://localhost:21003 | 21003 | admin / admin |
| **Neo4j Browser** | http://localhost:7474 | 7474 | neo4j / password |
| **PostgreSQL** | localhost:5432 | 5432 | stockelper / password |
| **MongoDB** | localhost:27017 | 27017 | stockelper / password |

---

## ğŸ” ë³´ì•ˆ ëª¨ë²” ì‚¬ë¡€

### 1. í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬
```bash
# .env íŒŒì¼ ì»¤ë°‹ ê¸ˆì§€
echo ".env" >> .gitignore

# ê°•ë ¥í•œ JWT Secret ìƒì„±
openssl rand -base64 32

# ë°ì´í„°ë² ì´ìŠ¤ ë¹„ë°€ë²ˆí˜¸ ë³€ê²½
# í”„ë¡œë•ì…˜ì—ì„œëŠ” ë°˜ë“œì‹œ ë³€ê²½!
```

### 2. API í‚¤ ë³´ì•ˆ
```bash
# KIS API í‚¤ëŠ” users í…Œì´ë¸”ì— ì €ì¥
# í”„ë¡œë•ì…˜ì—ì„œëŠ” ì•”í˜¸í™” ê¶Œì¥

# OpenAI, DART API í‚¤ëŠ” í™˜ê²½ ë³€ìˆ˜ë¡œë§Œ ê´€ë¦¬
# ì ˆëŒ€ ì½”ë“œë‚˜ Gitì— í¬í•¨í•˜ì§€ ì•ŠìŒ
```

### 3. ë°ì´í„°ë² ì´ìŠ¤ ì ‘ê·¼ ì œì–´
```sql
-- PostgreSQL: ì‚¬ìš©ìë³„ ê¶Œí•œ ë¶„ë¦¬
CREATE USER llm_service WITH PASSWORD 'secure_password';
GRANT SELECT, INSERT, UPDATE ON TABLE chats TO llm_service;

-- í”„ë¡œë•ì…˜ì—ì„œëŠ” ë„¤íŠ¸ì›Œí¬ ê²©ë¦¬ ë˜ëŠ” VPN ì‚¬ìš©
```

### 4. HTTPS ì„¤ì • (í”„ë¡œë•ì…˜)
```nginx
# Nginx ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ ì„¤ì • ì˜ˆì‹œ
server {
    listen 443 ssl;
    server_name stockelper.yourdomain.com;

    ssl_certificate /path/to/cert.pem;
    ssl_certificate_key /path/to/key.pem;

    location / {
        proxy_pass http://localhost:3000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }

    location /api/llm {
        proxy_pass http://localhost:21009;
        proxy_buffering off;  # SSEë¥¼ ìœ„í•´ ë²„í¼ë§ ë¹„í™œì„±í™”
    }
}
```

---

## ğŸ“Š ëª¨ë‹ˆí„°ë§ ë° ë””ë²„ê¹…

### ë¡œê·¸ í™•ì¸

```bash
# ë°ì´í„°ë² ì´ìŠ¤ ë¡œê·¸
docker logs stockelper-postgres
docker logs stockelper-mongodb
docker logs stockelper-neo4j

# ì„œë¹„ìŠ¤ ë¡œê·¸ (ê° í„°ë¯¸ë„ì—ì„œ)
# ë˜ëŠ” Docker ì‹¤í–‰ ì‹œ
docker-compose logs -f llm-server
docker-compose logs -f portfolio-server
docker-compose logs -f backtesting-server

# Airflow ë¡œê·¸
docker logs stockelper-airflow
```

### ë°ì´í„°ë² ì´ìŠ¤ ìƒíƒœ í™•ì¸

```bash
# PostgreSQL
docker exec -it stockelper-postgres psql -U stockelper -d stockelper_web -c "SELECT COUNT(*) FROM users;"

# MongoDB
docker exec -it stockelper-mongodb mongosh --eval "db.stock_reports.countDocuments()"

# Neo4j
docker exec -it stockelper-neo4j cypher-shell -u neo4j -p password -c "MATCH (n) RETURN count(n);"
```

### í—¬ìŠ¤ ì²´í¬

```bash
# API í—¬ìŠ¤ ì²´í¬
curl http://localhost:3000/api/health
curl http://localhost:21009/health
curl http://localhost:21008/health
curl http://localhost:21011/health

# Airflow ìƒíƒœ
curl http://localhost:21003/health
```

---

## ğŸ› ï¸ ë¬¸ì œ í•´ê²°

### ì¼ë°˜ì ì¸ ë¬¸ì œ

#### 1. ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì‹¤íŒ¨
```bash
# ë°ì´í„°ë² ì´ìŠ¤ ìƒíƒœ í™•ì¸
docker ps

# ë¡œê·¸ í™•ì¸
docker logs stockelper-postgres

# ì¬ì‹œì‘
docker-compose -f docker-compose.databases.yml restart
```

#### 2. í¬íŠ¸ ì¶©ëŒ
```bash
# í¬íŠ¸ ì‚¬ìš© í™•ì¸
netstat -tuln | grep 3000
netstat -tuln | grep 5432

# ì‚¬ìš© ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ
kill -9 $(lsof -t -i:3000)

# ë˜ëŠ” ë‹¤ë¥¸ í¬íŠ¸ë¡œ ì‹¤í–‰
PORT=3001 pnpm dev
```

#### 3. API í‚¤ ì˜¤ë¥˜
```bash
# DART API í‚¤ í™•ì¸
curl "https://opendart.fss.or.kr/api/company.json?crtfc_key=YOUR_KEY&corp_code=00126380"

# KIS API í† í° ë°œê¸‰
# https://apiportal.koreainvestment.com/
# ì•± ë“±ë¡ â†’ APP Key/Secret ë³µì‚¬
```

#### 4. ë©”ëª¨ë¦¬ ë¶€ì¡±
```bash
# Docker ë©”ëª¨ë¦¬ í• ë‹¹ ì¦ê°€
# Docker Desktop > Settings > Resources > Memory: 8GB â†’ 16GB

# ë˜ëŠ” ì„œë¹„ìŠ¤ë³„ ë©”ëª¨ë¦¬ ì œí•œ
# docker-compose.ymlì—ì„œ resources.limits.memory ì„¤ì •
```

#### 5. Neo4j ì¿¼ë¦¬ íƒ€ì„ì•„ì›ƒ
```cypher
-- ì¸ë±ìŠ¤ í™•ì¸
CALL db.indexes();

-- í†µê³„ ì—…ë°ì´íŠ¸
CALL apoc.stats.degrees('Company');

-- ì¿¼ë¦¬ ì‹¤í–‰ ê³„íš í™•ì¸
EXPLAIN MATCH (c:Company) WHERE c.code = '005930' RETURN c;
```

### ì„œë¹„ìŠ¤ë³„ ë¬¸ì œ í•´ê²°

ê° ì„œë¹„ìŠ¤ì˜ README.md íŒŒì¼ì—ì„œ ìƒì„¸í•œ ë¬¸ì œ í•´ê²° ê°€ì´ë“œë¥¼ ì°¸ì¡°í•˜ì„¸ìš”:
- [Frontend ë¬¸ì œ í•´ê²°](stockelper-fe/README.md#ë¬¸ì œ-í•´ê²°)
- [LLM Service ë¬¸ì œ í•´ê²°](stockelper-llm/README.md#ë¬¸ì œ-í•´ê²°)
- [Portfolio Service ë¬¸ì œ í•´ê²°](stockelper-portfolio/README.md#ë¬¸ì œ-í•´ê²°)
- [Backtesting Service ë¬¸ì œ í•´ê²°](stockelper-backtesting/README.md#ë¬¸ì œ-í•´ê²°)
- [Airflow ë¬¸ì œ í•´ê²°](stockelper-airflow/README.md#ë¬¸ì œ-í•´ê²°)
- [KG Builder ë¬¸ì œ í•´ê²°](stockelper-kg/README.md#ë¬¸ì œ-í•´ê²°)

---

## ğŸ“š ì¶”ê°€ ë¬¸ì„œ

### ì‹œìŠ¤í…œ ë‹¤ì´ì–´ê·¸ë¨
- **[ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ (í•œêµ­ì–´)](docs/diagrams/system-architecture-ko.md)** - 7ê°œ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì „ì²´ êµ¬ì¡°
- **[ë°ì´í„° í”Œë¡œìš° (í•œêµ­ì–´)](docs/diagrams/data-flow-ko.md)** - 5ê°€ì§€ í•µì‹¬ ë°ì´í„° íë¦„
- **[ë‹¤ì´ì–´ê·¸ë¨ ê°€ì´ë“œ](docs/diagrams/README.md)** - ë³´ëŠ” ë°©ë²•, í¸ì§‘ ê°€ì´ë“œ

### ì„œë¹„ìŠ¤ë³„ README
- [stockelper-fe/README.md](stockelper-fe/README.md) - í”„ë¡ íŠ¸ì—”ë“œ ìƒì„¸ ê°€ì´ë“œ
- [stockelper-llm/README.md](stockelper-llm/README.md) - LLM ì„œë¹„ìŠ¤ ìƒì„¸ ê°€ì´ë“œ
- [stockelper-portfolio/README.md](stockelper-portfolio/README.md) - í¬íŠ¸í´ë¦¬ì˜¤ ì„œë¹„ìŠ¤ ìƒì„¸ ê°€ì´ë“œ
- [stockelper-backtesting/README.md](stockelper-backtesting/README.md) - ë°±í…ŒìŠ¤íŒ… ì„œë¹„ìŠ¤ ìƒì„¸ ê°€ì´ë“œ
- [stockelper-airflow/README.md](stockelper-airflow/README.md) - Airflow ìƒì„¸ ê°€ì´ë“œ
- [stockelper-kg/README.md](stockelper-kg/README.md) - ì§€ì‹ ê·¸ë˜í”„ ë¹Œë” ìƒì„¸ ê°€ì´ë“œ
- [stockelper-news-crawler/README.md](stockelper-news-crawler/README.md) - ë‰´ìŠ¤ í¬ë¡¤ëŸ¬ ìƒì„¸ ê°€ì´ë“œ

### ê°œë°œ ê°€ì´ë“œ
- [CONTRIBUTING.md](CONTRIBUTING.md) - ê¸°ì—¬ ê°€ì´ë“œ
- [DEPLOY.md](stockelper-fe/DEPLOY.md) - Frontend ë°°í¬ ê°€ì´ë“œ

---

## ğŸ¯ ë‹¤ìŒ ë‹¨ê³„

### 1. ê³„ì • ìƒì„±
1. http://localhost:3000/sign-up ì ‘ì†
2. íšŒì›ê°€ì… ì–‘ì‹ ì‘ì„± (ì´ë©”ì¼, ë¹„ë°€ë²ˆí˜¸)
3. íˆ¬ì ì„±í–¥ ì„¤ë¬¸ì¡°ì‚¬ ì™„ë£Œ (8ê°€ì§€ ì§ˆë¬¸)
4. ëŒ€ì‹œë³´ë“œë¡œ ìë™ ë¦¬ë‹¤ì´ë ‰íŠ¸

### 2. KIS API ì„¤ì •
1. Settings â†’ KIS Settings
2. App Key, App Secret, ê³„ì¢Œë²ˆí˜¸ ì…ë ¥
3. ìë™ìœ¼ë¡œ Access Token ë°œê¸‰ ë° ì €ì¥

### 3. AI ì±„íŒ… ì‚¬ìš©
1. Chat í˜ì´ì§€ë¡œ ì´ë™
2. ìƒˆ ëŒ€í™” ì‹œì‘
3. ì§ˆë¬¸ ì…ë ¥ (ì˜ˆ: "ì‚¼ì„±ì „ì ë¶„ì„í•´ì¤˜")
4. ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¬ë° ì‘ë‹µ í™•ì¸

### 4. í¬íŠ¸í´ë¦¬ì˜¤ ì¶”ì²œ
1. Portfolio í˜ì´ì§€ë¡œ ì´ë™
2. í¬íŠ¸í´ë¦¬ì˜¤ ì¶”ì²œ ìš”ì²­
3. AIê°€ íˆ¬ì ì„±í–¥ì— ë§ëŠ” í¬íŠ¸í´ë¦¬ì˜¤ ìƒì„±
4. ì¢…ëª©ë³„ ìƒì„¸ ë¶„ì„ í™•ì¸

### 5. ë°±í…ŒìŠ¤íŒ…
1. Backtesting í˜ì´ì§€ë¡œ ì´ë™
2. ì „ëµ íŒŒë¼ë¯¸í„° ì„¤ì •
3. ë°±í…ŒìŠ¤íŠ¸ ì‹¤í–‰
4. ì„±ê³¼ ë¶„ì„ ë° ë¦¬í¬íŠ¸ í™•ì¸

---

## ğŸ¤ ê¸°ì—¬ ê°€ì´ë“œ

### ê¸°ì—¬ ë°©ë²•
1. ì €ì¥ì†Œ í¬í¬
2. ê¸°ëŠ¥ ë¸Œëœì¹˜ ìƒì„±: `git checkout -b feature/my-feature`
3. ë³€ê²½ì‚¬í•­ ì»¤ë°‹: `git commit -am 'Add new feature'`
4. ë¸Œëœì¹˜ì— í‘¸ì‹œ: `git push origin feature/my-feature`
5. Pull Request ìƒì„±

### ì½”ë”© ìŠ¤íƒ€ì¼
- **Python**: Black, isort, flake8, mypy
- **JavaScript/TypeScript**: ESLint, Prettier
- **ì»¤ë°‹ ë©”ì‹œì§€**: Conventional Commits ê·œì¹™ ì¤€ìˆ˜

### í…ŒìŠ¤íŠ¸
```bash
# Python í”„ë¡œì íŠ¸
uv run pytest --cov

# Frontend
pnpm test
```

---

## ğŸ“„ ë¼ì´ì„ ìŠ¤

MIT License

Copyright (c) 2025 Stockelper-Lab

ìì„¸í•œ ë‚´ìš©ì€ [LICENSE](LICENSE) íŒŒì¼ì„ ì°¸ì¡°í•˜ì„¸ìš”.

---

## ğŸ‘¨â€ğŸ’» íŒ€

**Stockelper-Lab Team**

- **í”„ë¡ íŠ¸ì—”ë“œ**: Next.js 15, React 19, Prisma ORM
- **ë°±ì—”ë“œ**: FastAPI, LangGraph, Backtrader
- **AI/ML**: LangChain, OpenAI GPT-4/5.1, Prophet
- **ë°ì´í„°**: Airflow, Neo4j, PostgreSQL, MongoDB
- **ì¸í”„ë¼**: Docker, GitHub Actions

---

## ğŸ“ ë¬¸ì˜ ë° ì§€ì›

- **Issues**: GitHub Issues (ê° ë ˆí¬ì§€í† ë¦¬)
- **Documentation**: `docs/` ë””ë ‰í† ë¦¬
- **Email**: admin@stockelper.com

---

## ğŸ™ ê°ì‚¬ì˜ ê¸€

ì´ í”„ë¡œì íŠ¸ëŠ” ë‹¤ìŒ ì˜¤í”ˆì†ŒìŠ¤ í”„ë¡œì íŠ¸ë“¤ì˜ ë„ì›€ì„ ë°›ì•˜ìŠµë‹ˆë‹¤:

- [Next.js](https://nextjs.org/) - React í”„ë ˆì„ì›Œí¬
- [FastAPI](https://fastapi.tiangolo.com/) - ì›¹ í”„ë ˆì„ì›Œí¬
- [LangChain](https://www.langchain.com/) & [LangGraph](https://langchain-ai.github.io/langgraph/) - AI ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜
- [Apache Airflow](https://airflow.apache.org/) - ì›Œí¬í”Œë¡œìš° ê´€ë¦¬
- [Neo4j](https://neo4j.com/) - ê·¸ë˜í”„ ë°ì´í„°ë² ì´ìŠ¤
- [PostgreSQL](https://www.postgresql.org/) - ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤
- [OpenAI](https://openai.com/) - LLM ëª¨ë¸
- [ê¸ˆìœµê°ë…ì› DART](https://opendart.fss.or.kr/) - ê¸ˆìœµ ê³µì‹œ ë°ì´í„°
- [í•œêµ­íˆ¬ìì¦ê¶Œ](https://www.koreainvestment.com/) - ì¦ê¶Œ API

ê·¸ë¦¬ê³  Stockelper-Lab í”„ë¡œì íŠ¸ì— ê¸°ì—¬í•´ì£¼ì‹  ëª¨ë“  ë¶„ë“¤ê»˜ ê°ì‚¬ë“œë¦½ë‹ˆë‹¤.

---

**ğŸš€ Happy Building! í–‰ë³µí•œ íˆ¬ì ë˜ì„¸ìš”!**

â¤ï¸ Made with love by Stockelper-Lab Team
